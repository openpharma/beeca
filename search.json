[{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"GNU Lesser General Public License","title":"GNU Lesser General Public License","text":"Version 3, 29 June 2007Copyright © 2007 Free Software Foundation, Inc. <http://fsf.org/> Everyone permitted copy distribute verbatim copies license document, changing allowed. version GNU Lesser General Public License incorporates terms conditions version 3 GNU General Public License, supplemented additional permissions listed .","code":""},{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":"id_0-additional-definitions","dir":"","previous_headings":"","what":"0. Additional Definitions","title":"GNU Lesser General Public License","text":"used herein, “License” refers version 3 GNU Lesser General Public License, “GNU GPL” refers version 3 GNU General Public License. “Library” refers covered work governed License, Application Combined Work defined . “Application” work makes use interface provided Library, otherwise based Library. Defining subclass class defined Library deemed mode using interface provided Library. “Combined Work” work produced combining linking Application Library. particular version Library Combined Work made also called “Linked Version”. “Minimal Corresponding Source” Combined Work means Corresponding Source Combined Work, excluding source code portions Combined Work , considered isolation, based Application, Linked Version. “Corresponding Application Code” Combined Work means object code /source code Application, including data utility programs needed reproducing Combined Work Application, excluding System Libraries Combined Work.","code":""},{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":"id_1-exception-to-section-3-of-the-gnu-gpl","dir":"","previous_headings":"","what":"1. Exception to Section 3 of the GNU GPL","title":"GNU Lesser General Public License","text":"may convey covered work sections 3 4 License without bound section 3 GNU GPL.","code":""},{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":"id_2-conveying-modified-versions","dir":"","previous_headings":"","what":"2. Conveying Modified Versions","title":"GNU Lesser General Public License","text":"modify copy Library, , modifications, facility refers function data supplied Application uses facility (argument passed facility invoked), may convey copy modified version: ) License, provided make good faith effort ensure , event Application supply function data, facility still operates, performs whatever part purpose remains meaningful, b) GNU GPL, none additional permissions License applicable copy.","code":""},{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":"id_3-object-code-incorporating-material-from-library-header-files","dir":"","previous_headings":"","what":"3. Object Code Incorporating Material from Library Header Files","title":"GNU Lesser General Public License","text":"object code form Application may incorporate material header file part Library. may convey object code terms choice, provided , incorporated material limited numerical parameters, data structure layouts accessors, small macros, inline functions templates (ten fewer lines length), following: ) Give prominent notice copy object code Library used Library use covered License. b) Accompany object code copy GNU GPL license document.","code":""},{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":"id_4-combined-works","dir":"","previous_headings":"","what":"4. Combined Works","title":"GNU Lesser General Public License","text":"may convey Combined Work terms choice , taken together, effectively restrict modification portions Library contained Combined Work reverse engineering debugging modifications, also following: ) Give prominent notice copy Combined Work Library used Library use covered License. b) Accompany Combined Work copy GNU GPL license document. c) Combined Work displays copyright notices execution, include copyright notice Library among notices, well reference directing user copies GNU GPL license document. d) one following: 0) Convey Minimal Corresponding Source terms License, Corresponding Application Code form suitable , terms permit, user recombine relink Application modified version Linked Version produce modified Combined Work, manner specified section 6 GNU GPL conveying Corresponding Source. 1) Use suitable shared library mechanism linking Library. suitable mechanism one () uses run time copy Library already present user’s computer system, (b) operate properly modified version Library interface-compatible Linked Version. e) Provide Installation Information, otherwise required provide information section 6 GNU GPL, extent information necessary install execute modified version Combined Work produced recombining relinking Application modified version Linked Version. (use option 4d0, Installation Information must accompany Minimal Corresponding Source Corresponding Application Code. use option 4d1, must provide Installation Information manner specified section 6 GNU GPL conveying Corresponding Source.)","code":""},{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":"id_5-combined-libraries","dir":"","previous_headings":"","what":"5. Combined Libraries","title":"GNU Lesser General Public License","text":"may place library facilities work based Library side side single library together library facilities Applications covered License, convey combined library terms choice, following: ) Accompany combined library copy work based Library, uncombined library facilities, conveyed terms License. b) Give prominent notice combined library part work based Library, explaining find accompanying uncombined form work.","code":""},{"path":"https://openpharma.github.io/beeca/LICENSE.html","id":"id_6-revised-versions-of-the-gnu-lesser-general-public-license","dir":"","previous_headings":"","what":"6. Revised Versions of the GNU Lesser General Public License","title":"GNU Lesser General Public License","text":"Free Software Foundation may publish revised /new versions GNU Lesser General Public License time time. new versions similar spirit present version, may differ detail address new problems concerns. version given distinguishing version number. Library received specifies certain numbered version GNU Lesser General Public License “later version” applies , option following terms conditions either published version later version published Free Software Foundation. Library received specify version number GNU Lesser General Public License, may choose version GNU Lesser General Public License ever published Free Software Foundation. Library received specifies proxy can decide whether future versions GNU Lesser General Public License shall apply, proxy’s public statement acceptance version permanent authorization choose version Library.","code":""},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Introduction to estimating a marginal estimand with beeca","text":"ICH E9(R1) addendum proposed framework formulation scientific questions treatment effects clinical trials. framework emphasized importance formulating precisely scientific questions interest clinical trials form estimand. estimand describes treatment effect interest via five attributes, include treatment, population, variable (endpoint), intercurrent event population-level summary. Recent FDA guidance (2023) Adjusting Covariates Randomized Clinical Trials Drugs Biological Products Industry discussed various considerations prospectively specifying covariate-adjusted analysis, including distinction unconditional vs. conditional average treatment effects. vignette provides brief explanation different concepts average treatment effect covered package. analysis example using package estimate average treatment effect clinical trial covariate adjustment. comparison implementations methods.","code":""},{"path":[]},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"what-is-an-average-treatment-effect","dir":"Articles","previous_headings":"General concepts","what":"What is an average treatment effect?","title":"Introduction to estimating a marginal estimand with beeca","text":"general, average treatment effect effect moving population untreated (control treatment) treated (experimental treatment). average treatment effect can estimated either without covariate adjustment. Different flavours average treatment effect exist, depending specific population moved untreated treated. overall superpopulation (denoted SS), given sample patients trial (assumed randomly sampled superpopulation), define following potential estimands. Population Average Treatment Effect PATES\\mathrm{PATE}^S. average outcome everyone superpopulation treated experimental treatment vs. average outcome treated control treatment. Conditional Average Treatment Effect, CATES(x)\\mathrm{CATE}^S(x). average outcome everyone superpopulation covariate value xx treated experimental treatment vs. average outcome treated control treatment. Conditional Population Average Treatment Effect CPATES\\mathrm{CPATE}^S. average CATES(xi)\\mathrm{CATE}^S(x_i) patients =1,…,Ni=1,\\ldots,N trial sample. Can also thought expected difference outcome means (experimental vs. control), conditional baseline covariates x1,…,xNx_1,\\ldots,x_N. Sample Average Treatment Effect SATE\\mathrm{SATE}. average outcome everyone trial treated experimental treatment vs. average outcome treated control treatment. FDA guidance, recent discussions covariate adjustment, average treatment effects often classified either unconditional conditional. (Sometimes marginal used interchangeably unconditional). context, usually meant “conditional” CATES(x)\\mathrm{CATE}^S(x). , subgroup specific average treatment effect. Often, assumption made subgroup specific average treatment effects identical across subgroups. assumption wrong, interpretation can challenging. usually meant “unconditional” (“marginal”) average subgroup-specific average treatment effects. second averaging step gives corresponding estimation procedures level robustness model misspecification. Hence following distinction FDA guidance: Sponsors can perform covariate-adjusted estimation inference unconditional treatment effect primary analysis data randomized trial. Sponsors discuss relevant review divisions specific proposals protocol statistical analysis plan containing nonlinear regression estimate conditional treatment effects primary analysis. coarse classification average treatment effects either “unconditional / marginal” “conditional”, PATES\\mathrm{PATE}^S, CPATES\\mathrm{CPATE}^S SATE\\mathrm{SATE} can viewed “unconditional / marginal”, CATES(x)\\mathrm{CATE}^S(x) can viewed “conditional”.","code":""},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"how-to-estimate-unconditional-marginal-average-treatment-effect","dir":"Articles","previous_headings":"General concepts","what":"How to estimate “unconditional / marginal” average treatment effect?","title":"Introduction to estimating a marginal estimand with beeca","text":"binary endpoint, average treatment effect, whether PATES\\mathrm{PATE}^S, CPATES\\mathrm{CPATE}^S SATE\\mathrm{SATE}, can estimated adjusted logistic regression using g-computation method. , estimating average counterfactual outcomes arm based predictions working model. Based average counterfactual outcomes, different summary measure risk difference, relative risk odds ratio can evaluated. Regardless whether estimand PATES\\mathrm{PATE}^S, CPATES\\mathrm{CPATE}^S SATE\\mathrm{SATE}, point estimator can used.","code":""},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"how-to-estimate-the-variance-of-the-g-computation-estimator-of-average-treatment-effect","dir":"Articles","previous_headings":"General concepts","what":"How to estimate the variance of the g-computation estimator of average treatment effect?","title":"Introduction to estimating a marginal estimand with beeca","text":"avoid ambiguity regarding variance g-computation estimator calculated, necessary precise whether one estimating PATES\\mathrm{PATE}^S, CPATES\\mathrm{CPATE}^S SATE\\mathrm{SATE}. {beeca} implements variance estimation PATES\\mathrm{PATE}^S based methods Ye et al. (2023), CPATES\\mathrm{CPATE}^S based Ge et al. (2011). See Magirr et al. (2024) discussion estimands PATES\\mathrm{PATE}^S CPATES\\mathrm{CPATE}^S, corresponding methodology variance estimation.","code":""},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"analysis-example","dir":"Articles","previous_headings":"","what":"Analysis example","title":"Introduction to estimating a marginal estimand with beeca","text":"following example, use example CDISC clinical trial dataset ADaM format (?trial02_cdisc). include two treatment arms interest analysis: “Xanomeline High Dose” “Placebo”. show describe perform adjusted analysis targeting marginal risk difference two arms. logistic regression model used estimate average treatment effect Xanomeline High Dose Placebo. model adjust baseline values patient sex, race age. Difference marginal response proportions p-value corresponding 95% confidence interval estimated logistic regression model using methodology described Ge et al. 2011 sandwich variance estimator (Liu et al. 2023). sandwich estimator provides robustness model-misspecification. results summarised ARD format (Analysis Results Dataset) ease subsequent reporting. results can passed prespecified testing strategy required. provide simple example normal approximation applied:","code":"library(beeca) library(dplyr) ## Prepare the dataset for input dat <- trial02_cdisc %>%   ## Treatment variable must be coded as a factor   dplyr::mutate(TRTP = factor(TRTP))  ## Fit the logistic regression model adjusting for SEX, RACE and AGE fit <- glm(AVAL ~ TRTP + SEX + RACE + AGE, family = \"binomial\", data = dat)  ## Calculate the marginal treatment effect estimate and associated variance for a difference contrast ## using the Ge et al. method with robust HC0 sandwich variance marginal_fit <- get_marginal_effect(fit,   trt = \"TRTP\",   method = \"Ge\",   type = \"HC0\",   contrast = \"diff\",   reference = \"Placebo\" ) ## Warning in meatHC(x, type = type, omega = omega): HC0 covariances become (close ## to) singular if hat values are (close to) 1 as for observation(s) 24 ## View the ARD summary marginal_fit$marginal_results ## # A tibble: 19 × 8 ##    TRTVAR TRTVAL                  PARAM ANALTYP1 STAT  STATVAL ANALMETH ANALDESC ##    <chr>  <chr>                   <chr> <chr>    <chr>   <dbl> <chr>    <chr>    ##  1 TRTP   Placebo                 AVAL  DESCRIP… N     86      count    Compute… ##  2 TRTP   Placebo                 AVAL  DESCRIP… n     29      count    Compute… ##  3 TRTP   Placebo                 AVAL  DESCRIP… %     33.7    percent… Compute… ##  4 TRTP   Placebo                 AVAL  INFEREN… risk   0.343  g-compu… Compute… ##  5 TRTP   Placebo                 AVAL  INFEREN… risk…  0.0518 Ge - HC0 Compute… ##  6 TRTP   Xanomeline High Dose    AVAL  DESCRIP… N     84      count    Compute… ##  7 TRTP   Xanomeline High Dose    AVAL  DESCRIP… n     61      count    Compute… ##  8 TRTP   Xanomeline High Dose    AVAL  DESCRIP… %     72.6    percent… Compute… ##  9 TRTP   Xanomeline High Dose    AVAL  INFEREN… risk   0.716  g-compu… Compute… ## 10 TRTP   Xanomeline High Dose    AVAL  INFEREN… risk…  0.0494 Ge - HC0 Compute… ## 11 TRTP   Xanomeline Low Dose     AVAL  DESCRIP… N     84      count    Compute… ## 12 TRTP   Xanomeline Low Dose     AVAL  DESCRIP… n     62      count    Compute… ## 13 TRTP   Xanomeline Low Dose     AVAL  DESCRIP… %     73.8    percent… Compute… ## 14 TRTP   Xanomeline Low Dose     AVAL  INFEREN… risk   0.743  g-compu… Compute… ## 15 TRTP   Xanomeline Low Dose     AVAL  INFEREN… risk…  0.0460 Ge - HC0 Compute… ## 16 TRTP   diff: Xanomeline High … AVAL  INFEREN… diff   0.374  g-compu… Compute… ## 17 TRTP   diff: Xanomeline High … AVAL  INFEREN… diff…  0.0717 Ge - HC0 Compute… ## 18 TRTP   diff: Xanomeline Low D… AVAL  INFEREN… diff   0.400  g-compu… Compute… ## 19 TRTP   diff: Xanomeline Low D… AVAL  INFEREN… diff…  0.0694 Ge - HC0 Compute… ## Extract results marginal_results <- marginal_fit$marginal_results diff_est <- marginal_results[marginal_results$STAT == \"diff\", \"STATVAL\"][[1]] diff_se <- marginal_results[marginal_results$STAT == \"diff_se\", \"STATVAL\"][[1]]  ## 95% confidence interval ci_l <- diff_est - (qnorm(0.975) * diff_se) ci_u <- diff_est + (qnorm(0.975) * diff_se)  ## Two-sided p-value z_score <- diff_est / diff_se p_value <- 2 * (1 - pnorm(abs(z_score)))  tibble(   Contrast = marginal_results[marginal_results$STAT == \"diff\", ]$TRTVAL,   `Risk difference` = round(diff_est, 2),   `95% CI` = sprintf(\"(%s - %s)\", round(ci_l, 2), round(ci_u, 2)),   `p-value` = formatC(p_value, format = \"e\", digits = 2) ) ## # A tibble: 2 × 4 ##   Contrast                           `Risk difference` `95% CI`      `p-value` ##   <chr>                                          <dbl> <chr>         <chr>     ## 1 diff: Xanomeline High Dose-Placebo              0.37 (0.23 - 0.51) 1.86e-07  ## 2 diff: Xanomeline Low Dose-Placebo               0.4  (0.26 - 0.54) 8.02e-09"},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"comparing-different-implementations","dir":"Articles","previous_headings":"","what":"Comparing different implementations","title":"Introduction to estimating a marginal estimand with beeca","text":"illustrate usage {beeca} purposes results validation, compare {beeca} available implementations Ge et al. (2011) Ye et al. (2023) methods R SAS. demonstrate equivalence results highlighting simple user interface {beeca}. lightweight package developed focus facilitating quick industry adoption including compliance GxP validation requirements minimal dependencies. Throughout comparisons, use dataset trial01 included {beeca} package focus risk difference contrast.","code":""},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"ge-et-al-2011","dir":"Articles","previous_headings":"Comparing different implementations","what":"Ge et al (2011)","title":"Introduction to estimating a marginal estimand with beeca","text":"Alternative version 1: code provided Ge et al. (2011) paper. Note corresponding SAS code also available paper. Version 2: using {margins} package Version 3: using {marginaleffects} package Version 4: using SAS %Margins macro","code":"# pre-process trial01 dataset to convert treatment arm to a factor and handle missing value data01 <- trial01 |>   transform(trtp = as.factor(trtp)) |>   dplyr::filter(!is.na(aval)) fit <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = data01) beeca_ge <- get_marginal_effect(object = fit, trt = \"trtp\", method = \"Ge\",                                  contrast = \"diff\", reference = \"0\", type = \"model-based\") cat(\"Point estimate\", beeca_ge$marginal_est, \"\\nStandard error estimate\", beeca_ge$marginal_se) ## Point estimate -0.06836399  ## Standard error estimate 0.06071641 ge_var_paper <- function(glmfit, trt) {   pder <- function(ahat, vc, x) {     #### ahat: logistic regression parameters     #### vc: variance-covariance matrix of ahat     #### x: full model matrix of the logistic regression     #### return mean of phat on x and its se     phat <- plogis(x %*% ahat)     pbar <- mean(phat)     pderiv <- t(phat * (1 - phat)) %*% x / nrow(x)     sepbar <- sqrt(pderiv %*% vc %*% t(pderiv))     return(list(pbar = pbar, sepbar = sepbar, pderiv = pderiv))   }    difP <- function(glmfit) {     #### estimate the proportion difference and its standard error     df <- glmfit$model      vc <- vcov(glmfit)     df[, trt] <- 1     mat <- model.matrix(glmfit$formula, data = df)     pderT <- pder(coef(glmfit), vc, mat)     df[, trt] <- 0     mat <- model.matrix(glmfit$formula, data = df)     pderC <- pder(coef(glmfit), vc, mat)      difb <- pderT$pbar - pderC$pbar     sedif <- sqrt((pderT$pderiv - pderC$pderiv) %*% vc %*% t(pderT$pderiv - pderC$pderiv))      return(list(       pT = pderT$pbar,       pC = pderC$pbar,       dif = difb,       sedif = sedif,       var = sedif**2     ))   }    return(list(est = difP(glmfit)$dif, se = difP(glmfit)$sedif[[1]])) } paper_ge <- ge_var_paper(fit, \"trtp\") cat(\"Point estimate\", paper_ge$est, \"\\nStandard error estimate\", paper_ge$se) ## Point estimate -0.06836399  ## Standard error estimate 0.06071641 if (requireNamespace(\"margins\", quietly = T)) {   margins_ge <- margins::margins(model = fit, variables = \"trtp\", vcov = vcov(fit))   cat(\"Point estimate\", summary(margins_ge)$AME, \"\\nStandard error estimate\", summary(margins_ge)$SE) } ## Point estimate -0.06836399  ## Standard error estimate 0.06071641 if (requireNamespace(\"marginaleffects\", quietly = T)) {   marginaleffects_ge <- marginaleffects::avg_comparisons(fit, variables = \"trtp\")   cat(\"Point estimate\", marginaleffects_ge$estimate, \"\\nStandard error estimate\", marginaleffects_ge$std.error) } ## Point estimate -0.06836399  ## Standard error estimate 0.06071641 %Margins(data      = myWork.trial01,          class     = trtp,          classgref = first, /*Set reference to first level*/          response  = avaln,          roptions  = event='1',           dist      = binomial,            model     = trtp bl_cov,          margins   = trtp,           options   = cl diff reverse,           link      = logit);      ** Store output data sets ;  data myWork.margins_trt_estimates;   set work._MARGINS; run;           data myWork.margins_trt_diffs;   set work._DIFFSPM; run; cat(\"Point estimate\", margins_trial01$Estimate, \"\\nStandard error estimate\", margins_trial01$StdErr) ## Point estimate -0.06836399  ## Standard error estimate 0.06071641"},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"ye-et-al-2023","dir":"Articles","previous_headings":"Comparing different implementations","what":"Ye et al (2023)","title":"Introduction to estimating a marginal estimand with beeca","text":"Version 1: RobinCar package","code":"beeca_ye <- get_marginal_effect(object = fit, trt = \"trtp\", method = \"Ye\",                                  contrast = \"diff\", reference = \"0\") cat(\"Point estimate\", beeca_ye$marginal_est, \"\\nStandard error estimate\", beeca_ye$marginal_se) ## Point estimate -0.06836399  ## Standard error estimate 0.0608836 if (requireNamespace(\"RobinCar\", quietly = T)) {   robincar_ye <- RobinCar::robincar_glm(data.frame(fit$data), response_col = as.character(fit$formula[2]),       treat_col = \"trtp\", formula = fit$formula, g_family = fit$family,       contrast_h = \"diff\")$contrast$result   cat(\"Point estimate\", robincar_ye$estimate, \"\\nStandard error estimate\", robincar_ye$se) } ## Point estimate -0.06836399  ## Standard error estimate 0.0608836"},{"path":"https://openpharma.github.io/beeca/articles/estimand_and_implementations.html","id":"references","dir":"Articles","previous_headings":"Comparing different implementations","what":"References","title":"Introduction to estimating a marginal estimand with beeca","text":"Arel-Bundock V (2023). marginaleffects: Predictions, Comparisons, Slopes, Marginal Means, Hypothesis Tests. R package version 0.14.0, https://marginaleffects.com/. Bannick M, Ye T, Yi Y, Bian F (2024). RobinCar: Robust Estimation Inference Covariate-Adaptive Randomization. R package version 0.2.0, https://CRAN.R-project.org/package=RobinCar. European Medicines Agency. 2020. “ICH E9 (R1) addendum estimands sensitivity analysis clinical trials guideline statistical principles clinical trials.” https://www.ema.europa.eu/en/documents/scientific-guideline/ich-e9-r1-addendum-estimands--sensitivity-analysis-clinical-trials-guideline-statistical-principles-clinical-trials-step-5_en.pdf FDA. 2023. “Adjusting Covariates Randomized Clinical Trials Drugs Biological Products. Final Guidance Industry.” https://www.fda.gov/regulatory-information/search-fda-guidance-documents/adjusting-covariates-randomized-clinical-trials-drugs--biological-products Ge, Miaomiao, L Kathryn Durham, R Daniel Meyer, Wangang Xie, Neal Thomas. 2011. “Covariate-Adjusted Difference Proportions Clinical Trials Using Logistic Regression Weighted Risk Differences.” Drug Information Journal: DIJ/Drug Information Association 45: 481–93. Magirr, Dominic, Mark Baillie, Craig Wang, Alexander Przybylski. 2024. “Estimating Variance Covariate-Adjusted Estimators Average Treatment Effects Clinical Trials Binary Endpoints.” OSF. May 16. osf.io/9mp58. SAS Institute Inc. “Predictive margins average marginal effects.” https://support.sas.com/kb/63/038.html (Last Published: 13 Dec 2023) Thomas J. Leeper (2021). margins: Marginal Effects Model Objects. R package version 0.3.26. Ye, Ting, Marlena Bannick, Yanyao Yi, Jun Shao. 2023. Robust Variance Estimation Covariate-Adjusted Unconditional Treatment Effect Randomized Clinical Trials Binary Outcomes.” Statistical Theory Related Fields 7 (2): 159–63.","code":""},{"path":"https://openpharma.github.io/beeca/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Alex Przybylski. Maintainer, author. Mark Baillie. Author. Craig Wang. Author. Dominic Magirr. Author.","code":""},{"path":"https://openpharma.github.io/beeca/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Przybylski , Baillie M, Wang C, Magirr D (2024). beeca: Binary Endpoint Estimation Covariate Adjustment. R package version 0.2.0, https://openpharma.github.io/beeca/.","code":"@Manual{,   title = {beeca: Binary Endpoint Estimation with Covariate Adjustment},   author = {Alex Przybylski and Mark Baillie and Craig Wang and Dominic Magirr},   year = {2024},   note = {R package version 0.2.0},   url = {https://openpharma.github.io/beeca/}, }"},{"path":"https://openpharma.github.io/beeca/index.html","id":"binary-endpoint-estimation-with-covariate-adjustment","dir":"","previous_headings":"","what":"Binary Endpoint Estimation with Covariate Adjustment","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"goal beeca provide implementation solution simple user interface estimate marginal estimands binary endpoint setting covariate adjustment. primary aim lightweight implementation facilitate quick industry adoption use within GxP environments. secondary aim support simulation studies included manuscript Magirr et al. (2024).","code":""},{"path":[]},{"path":"https://openpharma.github.io/beeca/index.html","id":"methodology","dir":"","previous_headings":"","what":"Methodology","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"Motivated recent FDA guidance (2023) “Adjusting Covariates Randomized Clinical Trials Drugs Biological Products Guidance Industry”” recommendations robust variance estimation, implemented two approaches, namely Ge et al. (2011) Ye et al. (2023), perform variance estimation treatment effect estimator based g-computation logistic regression working model.","code":""},{"path":"https://openpharma.github.io/beeca/index.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"package designed estimate marginal (unconditional) estimands binary endpoint setting covariate adjustment. suited 2-arm clinical trials without covariate adaptive (stratified permuted block biased coin) randomization summary measure marginal estimand one (risk difference, odds ratio, risk ratio, log odds ratio, log risk ratio). practical considerations implications covariate adjustment superiority vs non-inferiority trials, please see Nicholas et al. (2015) Morris et al. (2022).","code":""},{"path":"https://openpharma.github.io/beeca/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"basic example shows obtain point variance estimates marginal estimand covariate adjusted working model:","code":"library(beeca)  ## Set treatment to a factor trial01$trtp <- factor(trial01$trtp)  ## Fit a logistic regression working model and pass it to beeca fit1 <- glm(aval ~ trtp + bl_cov, family=\"binomial\", data=trial01) |>   get_marginal_effect(trt=\"trtp\", method=\"Ye\", contrast=\"diff\")  ## View the results in Analysis Results Data (ARD) structure fit1$marginal_results"},{"path":"https://openpharma.github.io/beeca/index.html","id":"package-documentation","dir":"","previous_headings":"","what":"Package documentation","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"package documentation can found . brief overview different estimands estimation, please see vignette vignette(\"estimand_and_implementations\").","code":""},{"path":"https://openpharma.github.io/beeca/index.html","id":"quality-checks","dir":"","previous_headings":"","what":"Quality checks","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"possible cross checked {beeca} package alternative implementations SAS R. example, Ge et al. method applies delta method cross checked SAS %margins macro R packages {margins} {marginaleffects}. Ye et al. method cross checked {RobinCar}.","code":""},{"path":"https://openpharma.github.io/beeca/index.html","id":"package-authors","dir":"","previous_headings":"","what":"Package authors","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"Alex Przybylski Craig Wang Dominic Magirr Mark Baillie","code":""},{"path":"https://openpharma.github.io/beeca/index.html","id":"acknowledgments","dir":"","previous_headings":"","what":"Acknowledgments","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"lightweight implementation inspired aided comprehensive {RobinCar} package, developed Marlena Bannick, Ting Ye et al. thank ASA-BIOP Covariate Adjustment Scientific Working Group valuable feedback discussions. development covariate adjustment software Software Subteam ASA-BIOP Covariate Adjustment Scientific Working Group.","code":""},{"path":"https://openpharma.github.io/beeca/index.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Binary Endpoint Estimation with Covariate Adjustment","text":"FDA. 2023. “Adjusting Covariates Randomized Clinical Trials Drugs Biological Products. Final Guidance Industry.” https://www.fda.gov/regulatory-information/search-fda-guidance-documents/adjusting-covariates-randomized-clinical-trials-drugs--biological-products Ge, Miaomiao, L Kathryn Durham, R Daniel Meyer, Wangang Xie, Neal Thomas. 2011. “Covariate-Adjusted Difference Proportions Clinical Trials Using Logistic Regression Weighted Risk Differences.” Drug Information Journal: DIJ/Drug Information Association 45: 481–93. https://doi.org/10.1177/009286151104500409 Magirr, Dominic, Mark Baillie, Craig Wang, Alexander Przybylski. 2024. “Estimating Variance Covariate-Adjusted Estimators Average Treatment Effects Clinical Trials Binary Endpoints.” OSF. May 16. https://osf.io/9mp58. Ye, Ting, Marlena Bannick, Yanyao Yi, Jun Shao. 2023. “Robust Variance Estimation Covariate-Adjusted Unconditional Treatment Effect Randomized Clinical Trials Binary Outcomes.” Statistical Theory Related Fields 7 (2): 159–63. https://doi.org/10.1080/24754269.2023.2205802","code":""},{"path":"https://openpharma.github.io/beeca/reference/apply_contrast.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply contrast to calculate marginal estimate of treatment effect and corresponding standard error — apply_contrast","title":"Apply contrast to calculate marginal estimate of treatment effect and corresponding standard error — apply_contrast","text":"Calculates marginal estimate treatment effect corresponding standard error based fitted GLM object using specified contrast (summary measure) methods","code":""},{"path":"https://openpharma.github.io/beeca/reference/apply_contrast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply contrast to calculate marginal estimate of treatment effect and corresponding standard error — apply_contrast","text":"","code":"apply_contrast(   object,   contrast = c(\"diff\", \"rr\", \"or\", \"logrr\", \"logor\"),   reference )"},{"path":"https://openpharma.github.io/beeca/reference/apply_contrast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply contrast to calculate marginal estimate of treatment effect and corresponding standard error — apply_contrast","text":"object fitted glm object augmented counterfactual.predictions, counterfactual.means robust_varcov. contrast string specifying type contrast apply. Accepted values \"diff\" (risk difference), \"rr\" (risk ratio), \"\" (odds ratio), \"logrr\" (log risk ratio), \"logor\" (log odds ratio). Note: log-transformed ratios (logrr logor) work better compared rr computing confidence intervals using normal approximation. choice contrast affects treatment effects calculated interpreted. Default diff. reference string list strings indicating treatment group(s) use reference level pairwise comparisons. Accepted values must subset levels treatment variable. Default first n-1 treatment levels used glm object. parameter influences calculation treatment effects relative chosen reference group.","code":""},{"path":"https://openpharma.github.io/beeca/reference/apply_contrast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply contrast to calculate marginal estimate of treatment effect and corresponding standard error — apply_contrast","text":"updated glm object two additional components appended: marginal_est (marginal estimate treatment effect) marginal_se (standard error marginal estimate). appended component provide crucial information interpreting treatment effect using specified contrast method.","code":""},{"path":"https://openpharma.github.io/beeca/reference/apply_contrast.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply contrast to calculate marginal estimate of treatment effect and corresponding standard error — apply_contrast","text":"apply_constrast() functions computes summary measure two arms based estimated marginal effect variance-covariance matrix using Delta method. Note: Ensure glm object adequately prepared average_predictions() estimate_varcov() applying apply_contrast(). Failure may result errors indicating missing components.","code":""},{"path":[]},{"path":"https://openpharma.github.io/beeca/reference/apply_contrast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply contrast to calculate marginal estimate of treatment effect and corresponding standard error — apply_contrast","text":"","code":"trial01$trtp <- factor(trial01$trtp) fit1 <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = trial01) |>   predict_counterfactuals(trt = \"trtp\") |>   average_predictions() |>   estimate_varcov(method = \"Ye\") |>   apply_contrast(\"diff\", reference = \"0\") #> Warning: There is 1 record omitted from the original data due to missing values, please check if they should be imputed prior to model fitting.  # Assuming `trial01` is a dataset with treatment (`trtp`) # and baseline covariate (`bl_cov`) trial01$trtp <- factor(trial01$trtp) fit1 <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = trial01)  # Preprocess fit1 as required by apply_contrast fit2 <- fit1 |>   predict_counterfactuals(trt = \"trtp\") |>   average_predictions() |>   estimate_varcov(method = \"Ye\") #> Warning: There is 1 record omitted from the original data due to missing values, please check if they should be imputed prior to model fitting.  # Apply contrast to calculate marginal estimates fit3 <- apply_contrast(fit2, contrast = \"diff\", reference = \"0\")  fit3$marginal_est #>   diff: 1-0  #> -0.06836399  #> attr(,\"reference\") #> [1] \"0\" #> attr(,\"contrast\") #> [1] \"diff: 1-0\" fit3$marginal_se #> diff: 1-0  #> 0.0608836  #> attr(,\"reference\") #> [1] \"0\" #> attr(,\"contrast\") #> [1] \"diff: 1-0\" #> attr(,\"type\") #> [1] \"Ye\""},{"path":"https://openpharma.github.io/beeca/reference/average_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Average over counterfactual predictions — average_predictions","title":"Average over counterfactual predictions — average_predictions","text":"average_predictions() averages counterfactual predictions stored within glm object. pivotal estimating treatment contrasts associated variance estimates using g-computation. function assumes predictions generated via predict_counterfactuals().","code":""},{"path":"https://openpharma.github.io/beeca/reference/average_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Average over counterfactual predictions — average_predictions","text":"","code":"average_predictions(object)"},{"path":"https://openpharma.github.io/beeca/reference/average_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Average over counterfactual predictions — average_predictions","text":"object fitted glm object augmented counterfactual predictions named: counterfactual.predictions","code":""},{"path":"https://openpharma.github.io/beeca/reference/average_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Average over counterfactual predictions — average_predictions","text":"updated glm object appended additional component counterfactual.means.","code":""},{"path":"https://openpharma.github.io/beeca/reference/average_predictions.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Average over counterfactual predictions — average_predictions","text":"average_predictions() function calculates average counterfactual predictions can used estimate treatment contrast associated variance estimate. function appends glm object averaged counterfactual predictions. Note: Ensure glm object adequately prepared predict_counterfactuals() applying average_predictions(). Failure may result errors indicating missing components.","code":""},{"path":[]},{"path":"https://openpharma.github.io/beeca/reference/average_predictions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Average over counterfactual predictions — average_predictions","text":"","code":"# Use the trial01 dataset data(trial01)  # ensure the treatment indicator is a factor trial01$trtp <- factor(trial01$trtp)  # fit glm model for trial data fit1 <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = trial01)  # Preprocess fit1 as required by average_predictions fit2 <- fit1 |>   predict_counterfactuals(trt = \"trtp\") #> Warning: There is 1 record omitted from the original data due to missing values, please check if they should be imputed prior to model fitting.  # average over the counterfactual predictions fit3 <- average_predictions(fit2)  # display the average predictions fit3$counterfactual.means #>         0         1  #> 0.4874723 0.4191083"},{"path":"https://openpharma.github.io/beeca/reference/beeca-package.html","id":null,"dir":"Reference","previous_headings":"","what":"beeca: Binary Endpoint Estimation with Covariate Adjustment — beeca-package","title":"beeca: Binary Endpoint Estimation with Covariate Adjustment — beeca-package","text":"Performs estimation marginal treatment effects binary outcomes using logistic regression working models covariate adjustment (see discussions Magirr et al (2024) https://osf.io/9mp58/). Implements variance estimators Ge et al (2011) doi:10.1177/009286151104500409  Ye et al (2023) doi:10.1080/24754269.2023.2205802 .","code":""},{"path":[]},{"path":"https://openpharma.github.io/beeca/reference/beeca-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"beeca: Binary Endpoint Estimation with Covariate Adjustment — beeca-package","text":"Maintainer: Alex Przybylski alexander.przybylski@novartis.com Authors: Mark Baillie mark.baillie@novartis.com (ORCID) Craig Wang craig.wang@novartis.com (ORCID) Dominic Magirr dominic.magirr@novartis.com","code":""},{"path":"https://openpharma.github.io/beeca/reference/estimate_varcov.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","title":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","text":"Main variance estimation function. Estimates variance-covariance matrix marginal estimand generalized linear model (GLM) object using specified methods. function supports Ge's Ye's methods variance estimation, accommodating different estimand specifications.","code":""},{"path":"https://openpharma.github.io/beeca/reference/estimate_varcov.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","text":"","code":"estimate_varcov(   object,   strata = NULL,   method = c(\"Ge\", \"Ye\"),   type = c(\"HC0\", \"model-based\", \"HC3\", \"HC\", \"HC1\", \"HC2\", \"HC4\", \"HC4m\", \"HC5\"),   mod = FALSE )"},{"path":"https://openpharma.github.io/beeca/reference/estimate_varcov.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","text":"object fitted glm object augmented counterfactual.predictions, counterfactual.predictions counterfactual.means strata optional string vector strings specifying names stratification variables. Relevant Ye's method used adjust variance-covariance estimation stratification. provided, specified variable must present model. method string indicating chosen method variance estimation. Supported methods Ge Ye. default method Ge based Ge et al (2011) suitable variance estimation conditional average treatment effect. method Ye based Ye et al (2023) suitable variance estimation population average treatment effect. details, see Magirr et al. (2024). type string indicating type variance estimator use (applicable Ge's method). Supported types include HC0 (default), model-based, HC3, HC, HC1, HC2, HC4, HC4m, HC5. See vcovHC heteroscedasticity-consistent estimators. parameter allows flexibility handling heteroscedasticity model specification errors. mod Ye's method, implementation open-source RobinCar package additional variance decomposition step estimating robust variance, utilizes different counterfactual outcomes original reference. Set mod = TRUE use exactly implementation method described Ye et al (2022), default FALSE use modified implementation RobinCar Bannick et al (2023) improves stability.","code":""},{"path":"https://openpharma.github.io/beeca/reference/estimate_varcov.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","text":"updated glm object appended additional component robust_varcov, estimated variance-covariance matrix marginal effect. matrix format estimation method indicated matrix attributes.","code":""},{"path":"https://openpharma.github.io/beeca/reference/estimate_varcov.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","text":"estimate_varcov function facilitates robust variance estimation techniques GLM models, particularly useful clinical trial analysis fields requiring robust statistical inference. allows researchers account complex study designs, including stratification different treatment contrasts, providing flexible interface variance-covariance estimation. Note: Ensure glm object adequately prepared predict_counterfactuals average_predictions applying estimate_varcov(). Failure may result errors indicating missing components.","code":""},{"path":"https://openpharma.github.io/beeca/reference/estimate_varcov.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","text":"Ye T. et al. (2023) Robust variance estimation covariate-adjusted unconditional treatment effect randomized clinical trials binary outcomes. Statistical Theory Related Fields Ge M. et al. (2011) Covariate-Adjusted Difference Proportions Clinical Trials Using Logistic Regression Weighted Risk Differences. Drug Information Journal. Bannick, M. S., et al. General Form Covariate Adjustment Randomized Clinical Trials. arXiv preprint arXiv:2306.10213 (2023).","code":""},{"path":[]},{"path":"https://openpharma.github.io/beeca/reference/estimate_varcov.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate variance-covariance matrix for marginal estimand based on GLM model — estimate_varcov","text":"","code":"# Example usage with a binary outcome GLM model trial01$trtp <- factor(trial01$trtp) fit1 <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = trial01)  #' # Preprocess fit1 as required by estimate_varcov fit2 <- fit1 |>   predict_counterfactuals(trt = \"trtp\") |>   average_predictions() #> Warning: There is 1 record omitted from the original data due to missing values, please check if they should be imputed prior to model fitting.  # Estimate variance-covariance using Ge's method fit3_ge <- estimate_varcov(fit2, method = \"Ge\") print(fit3_ge$robust_varcov) #>               0             1 #> 0  1.878839e-03 -2.759138e-06 #> 1 -2.759138e-06  1.808457e-03 #> attr(,\"type\") #> [1] \"Ge - HC0\"   # Estimate variance-covariance using Ye's method with stratification fit4 <- glm(aval ~ trtp + bl_cov_c, family = \"binomial\", data = trial01) |>   predict_counterfactuals(trt = \"trtp\") |>   average_predictions() #> Warning: There are 2 records omitted from the original data due to missing values, please check if they should be imputed prior to model fitting. fit4_ye <- estimate_varcov(fit4, method = \"Ye\", strata = \"bl_cov_c\") print(fit4_ye$robust_varcov) #>               0             1 #> 0  1.890549e-03 -3.739455e-07 #> 1 -3.739455e-07  1.846667e-03 #> attr(,\"type\") #> [1] \"Ye\""},{"path":"https://openpharma.github.io/beeca/reference/ge_macro_trial01.html","id":null,"dir":"Reference","previous_headings":"","what":"Output from the Ge et al (2011) SAS macro applied to the trial01 dataset — ge_macro_trial01","title":"Output from the Ge et al (2011) SAS macro applied to the trial01 dataset — ge_macro_trial01","text":"purposes implementation comparisons, result outputs SAS macro provided Ge et al (2011) publication (https://doi.org/10.1177/009286151104500409), applied trial01 dataset included beeca, adjusting treatment (trtp) single covariate (bl_cov) targeting risk difference contrast.","code":""},{"path":"https://openpharma.github.io/beeca/reference/ge_macro_trial01.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Output from the Ge et al (2011) SAS macro applied to the trial01 dataset — ge_macro_trial01","text":"","code":"ge_macro_trial01"},{"path":"https://openpharma.github.io/beeca/reference/ge_macro_trial01.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Output from the Ge et al (2011) SAS macro applied to the trial01 dataset — ge_macro_trial01","text":"ge_macro_trial01 tibble 1 row 6 columns: diff Marginal risk difference estimate se Standard error marginal risk difference estimate pt Marginal risk treated pC Marginal risk controls lower Lower bound 95 percent confidence interval risk difference estimate upper Upper bound 95 percent confidence interval risk difference estimate","code":""},{"path":"https://openpharma.github.io/beeca/reference/get_marginal_effect.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate marginal treatment effects using a GLM working model — get_marginal_effect","title":"Estimate marginal treatment effects using a GLM working model — get_marginal_effect","text":"Estimates marginal treatment effect logistic regression working model using specified choice variance estimator contrast.","code":""},{"path":"https://openpharma.github.io/beeca/reference/get_marginal_effect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate marginal treatment effects using a GLM working model — get_marginal_effect","text":"","code":"get_marginal_effect(   object,   trt,   strata = NULL,   method = \"Ge\",   type = \"HC0\",   contrast = \"diff\",   reference,   mod = FALSE )"},{"path":"https://openpharma.github.io/beeca/reference/get_marginal_effect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate marginal treatment effects using a GLM working model — get_marginal_effect","text":"object fitted glm object. trt string specifying name treatment variable model formula. must one linear predictor variables used fitting object. strata optional string vector strings specifying names stratification variables. Relevant Ye's method used adjust variance-covariance estimation stratification. provided, specified variable must present model. method string indicating chosen method variance estimation. Supported methods Ge Ye. default method Ge based Ge et al (2011) suitable variance estimation conditional average treatment effect. method Ye based Ye et al (2023) suitable variance estimation population average treatment effect. details, see Magirr et al. (2024). type string indicating type variance estimator use (applicable Ge's method). Supported types include HC0 (default), model-based, HC3, HC, HC1, HC2, HC4, HC4m, HC5. See vcovHC heteroscedasticity-consistent estimators. contrast string indicating choice contrast. Defaults 'diff' risk difference. See apply_contrast. reference string indicating treatment group considered reference level. Accepted values one levels treatment variable. Default first level used glm object. parameter influences calculation treatment effects relative chosen reference group. mod Ye's method, implementation open-source RobinCar package additional variance decomposition step estimating robust variance, utilizes different counterfactual outcomes original reference. Set mod = TRUE use exactly implementation method described Ye et al (2022), default FALSE use modified implementation RobinCar Bannick et al (2023) improves stability.","code":""},{"path":"https://openpharma.github.io/beeca/reference/get_marginal_effect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate marginal treatment effects using a GLM working model — get_marginal_effect","text":"updated glm object appended marginal estimate components: counterfactual.predictions (see predict_counterfactuals), counterfactual.means (see average_predictions), robust_varcov (see estimate_varcov), marginal_est, marginal_se (see apply_contrast) marginal_results. summary shown ","code":""},{"path":"https://openpharma.github.io/beeca/reference/get_marginal_effect.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate marginal treatment effects using a GLM working model — get_marginal_effect","text":"get_marginal_effect function wrapper facilitates advanced variance estimation techniques GLM models covariate adjustment targeting population average treatment effect. particularly useful clinical trial analysis fields requiring robust statistical inference. allows researchers account complex study designs, including stratification treatment contrasts, providing flexible interface variance-covariance estimation.","code":""},{"path":"https://openpharma.github.io/beeca/reference/get_marginal_effect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate marginal treatment effects using a GLM working model — get_marginal_effect","text":"","code":"trial01$trtp <- factor(trial01$trtp) fit1 <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = trial01) |>   get_marginal_effect(trt = \"trtp\", method = \"Ye\", contrast = \"diff\", reference = \"0\") #> Warning: There is 1 record omitted from the original data due to missing values, please check if they should be imputed prior to model fitting. fit1$marginal_results #> # A tibble: 12 × 8 #>    TRTVAR TRTVAL    PARAM ANALTYP1    STAT     STATVAL ANALMETH      ANALDESC    #>    <chr>  <chr>     <chr> <chr>       <chr>      <dbl> <chr>         <chr>       #>  1 trtp   0         aval  DESCRIPTIVE N       133      count         Computed u… #>  2 trtp   0         aval  DESCRIPTIVE n        65      count         Computed u… #>  3 trtp   0         aval  DESCRIPTIVE %        48.9    percentage    Computed u… #>  4 trtp   0         aval  INFERENTIAL risk      0.487  g-computation Computed u… #>  5 trtp   0         aval  INFERENTIAL risk_se   0.0435 Ye            Computed u… #>  6 trtp   1         aval  DESCRIPTIVE N       134      count         Computed u… #>  7 trtp   1         aval  DESCRIPTIVE n        56      count         Computed u… #>  8 trtp   1         aval  DESCRIPTIVE %        41.8    percentage    Computed u… #>  9 trtp   1         aval  INFERENTIAL risk      0.419  g-computation Computed u… #> 10 trtp   1         aval  INFERENTIAL risk_se   0.0427 Ye            Computed u… #> 11 trtp   diff: 1-0 aval  INFERENTIAL diff     -0.0684 g-computation Computed u… #> 12 trtp   diff: 1-0 aval  INFERENTIAL diff_se   0.0609 Ye            Computed u…"},{"path":"https://openpharma.github.io/beeca/reference/margins_trial01.html","id":null,"dir":"Reference","previous_headings":"","what":"Output from the Margins SAS macro applied to the trial01 dataset — margins_trial01","title":"Output from the Margins SAS macro applied to the trial01 dataset — margins_trial01","text":"purposes implementation comparisons, result outputs SAS Margins macro (https://support.sas.com/kb/63/038.html), applied trial01 dataset included beeca, adjusting treatment (trtp) single covariate (bl_cov) targeting risk difference contrast.","code":""},{"path":"https://openpharma.github.io/beeca/reference/margins_trial01.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Output from the Margins SAS macro applied to the trial01 dataset — margins_trial01","text":"","code":"margins_trial01"},{"path":"https://openpharma.github.io/beeca/reference/margins_trial01.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Output from the Margins SAS macro applied to the trial01 dataset — margins_trial01","text":"margins_trial01 tibble 1 row 11 columns: Estimate Marginal risk difference estimate ChiSq Wald Chi-Square statistic Row Row number StdErr Standard error marginal risk difference estimate Lower Lower bound 95 percent confidence interval estimate Upper Upper bound 95 percent confidence interval estimate Contrast Descriptive label contrast df Degrees freedom Pr p-value Alpha Significance level alpha label Label contrast","code":""},{"path":"https://openpharma.github.io/beeca/reference/predict_counterfactuals.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict counterfactual outcomes in GLM models — predict_counterfactuals","title":"Predict counterfactual outcomes in GLM models — predict_counterfactuals","text":"function calculates counterfactual predictions level specified treatment variable generalized linear model (GLM). designed aid assessment treatment effects predicting outcomes different treatments causal inference framework.","code":""},{"path":"https://openpharma.github.io/beeca/reference/predict_counterfactuals.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict counterfactual outcomes in GLM models — predict_counterfactuals","text":"","code":"predict_counterfactuals(object, trt)"},{"path":"https://openpharma.github.io/beeca/reference/predict_counterfactuals.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict counterfactual outcomes in GLM models — predict_counterfactuals","text":"object fitted glm object counterfactual predictions desired. trt string specifying name treatment variable model formula. must one linear predictor variables used fitting object.","code":""},{"path":"https://openpharma.github.io/beeca/reference/predict_counterfactuals.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict counterfactual outcomes in GLM models — predict_counterfactuals","text":"updated glm object appended additional component counterfactual.predictions. component contains tibble two columns: cf_pred_0 cf_pred_1, representing counterfactual predictions level treatment variable. descriptive label attribute explains counterfactual scenario associated column.","code":""},{"path":"https://openpharma.github.io/beeca/reference/predict_counterfactuals.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Predict counterfactual outcomes in GLM models — predict_counterfactuals","text":"function works creating two new datasets original data used fit GLM model. datasets, treatment variable set levels across records (e.g., patients). Predictions made dataset based fitted GLM model, simulating response variable treatment condition. results stored tidy format appended original model object analysis inspection. averaging counterfactual outcomes, apply average_predictions().","code":""},{"path":[]},{"path":"https://openpharma.github.io/beeca/reference/predict_counterfactuals.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict counterfactual outcomes in GLM models — predict_counterfactuals","text":"","code":"# Preparing data and fitting a GLM model trial01$trtp <- factor(trial01$trtp) fit1 <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = trial01)  # Generating counterfactual predictions fit2 <- predict_counterfactuals(fit1, \"trtp\") #> Warning: There is 1 record omitted from the original data due to missing values, please check if they should be imputed prior to model fitting.  # Accessing the counterfactual predictions fit2$counterfactual.predictions #> # A tibble: 267 × 2 #>      `0`   `1` #>    <dbl> <dbl> #>  1 0.533 0.463 #>  2 0.537 0.468 #>  3 0.481 0.413 #>  4 0.510 0.441 #>  5 0.428 0.362 #>  6 0.474 0.406 #>  7 0.490 0.421 #>  8 0.496 0.427 #>  9 0.514 0.445 #> 10 0.490 0.422 #> # ℹ 257 more rows attributes(fit2$counterfactual.predictions) #> $class #> [1] \"tbl_df\"     \"tbl\"        \"data.frame\" #>  #> $row.names #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 #>  #> $names #> [1] \"0\" \"1\" #>  #> $label #>                                                           0  #> \"Counterfactual predictions setting trtp=0 for all records\"  #>                                                           1  #> \"Counterfactual predictions setting trtp=1 for all records\"  #>  #> $treatment.variable #> [1] \"trtp\" #>"},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.glm.html","id":null,"dir":"Reference","previous_headings":"","what":"(internal) Sanitize a glm model — sanitize_model.glm","title":"(internal) Sanitize a glm model — sanitize_model.glm","text":"(internal) Sanitize glm model","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.glm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"(internal) Sanitize a glm model — sanitize_model.glm","text":"","code":"# S3 method for class 'glm' sanitize_model(model, trt, ...)"},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.glm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"(internal) Sanitize a glm model — sanitize_model.glm","text":"model glm binomial family canonical link. trt name treatment variable right-hand side formula glm. ... ignored.","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.glm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"(internal) Sanitize a glm model — sanitize_model.glm","text":"model non-compliant throw warnings errors.","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.glm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"(internal) Sanitize a glm model — sanitize_model.glm","text":"","code":"trial01$trtp <- factor(trial01$trtp) fit1 <- glm(aval ~ trtp + bl_cov, family = \"binomial\", data = trial01) fit1 <- sanitize_model(fit1, \"trtp\") #> Warning: There is 1 record omitted from the original data due to missing values, please check if they should be imputed prior to model fitting."},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.html","id":null,"dir":"Reference","previous_headings":"","what":"(internal) Sanitize functions to check model and data within GLM model object — sanitize_model","title":"(internal) Sanitize functions to check model and data within GLM model object — sanitize_model","text":"Performs checks GLM model object ensure meets specific criteria required analysis using functions beeca package. includes verifying model's family, link function, data completeness mode convergence. Currently supports models binomial family canonical logit link.","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"(internal) Sanitize functions to check model and data within GLM model object — sanitize_model","text":"","code":"sanitize_model(model, ...)"},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"(internal) Sanitize functions to check model and data within GLM model object — sanitize_model","text":"model model object, currently glm binomial family canonical link supported. ... arguments passed methods.","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"(internal) Sanitize functions to check model and data within GLM model object — sanitize_model","text":"model non-compliant throw warnings errors.","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_variable.html","id":null,"dir":"Reference","previous_headings":"","what":"(internal) Sanitize function to check model and data — sanitize_variable","title":"(internal) Sanitize function to check model and data — sanitize_variable","text":"(internal) Sanitize function check model data","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_variable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"(internal) Sanitize function to check model and data — sanitize_variable","text":"","code":"sanitize_variable(model, trt)"},{"path":"https://openpharma.github.io/beeca/reference/sanitize_variable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"(internal) Sanitize function to check model and data — sanitize_variable","text":"model glm model object. trt name treatment variable right-hand side glm formula.","code":""},{"path":"https://openpharma.github.io/beeca/reference/sanitize_variable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"(internal) Sanitize function to check model and data — sanitize_variable","text":"model variable non-compliant, throw warnings error.","code":""},{"path":"https://openpharma.github.io/beeca/reference/trial01.html","id":null,"dir":"Reference","previous_headings":"","what":"Example trial dataset 01 — trial01","title":"Example trial dataset 01 — trial01","text":"simplified example simulated trial dataset, missing data.","code":""},{"path":"https://openpharma.github.io/beeca/reference/trial01.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example trial dataset 01 — trial01","text":"","code":"trial01"},{"path":"https://openpharma.github.io/beeca/reference/trial01.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example trial dataset 01 — trial01","text":"trial01 data frame 268 rows 9 columns: usubjid Unique subject identifier aval Primary outcome variable (1 = yes/0 = ) trtp Planned treatment bl_cov Baseline covariate (numeric) bl_cov_c Dichotomized version bl_cov (category 1 0) region_2, ..., region_5 Indicators region (1 = yes/0 = )","code":""},{"path":"https://openpharma.github.io/beeca/reference/trial02_cdisc.html","id":null,"dir":"Reference","previous_headings":"","what":"Example CDISC Clinical Trial Dataset in ADaM Format — trial02_cdisc","title":"Example CDISC Clinical Trial Dataset in ADaM Format — trial02_cdisc","text":"dataset simplified, binary outcome version sample Phase 2 clinical trial dataset formatted according Analysis Data Model (ADaM) standards set Clinical Data Interchange Standards Consortium (CDISC). designed training educational purposes, showcasing clinical trial data can structured statistical analysis.","code":""},{"path":"https://openpharma.github.io/beeca/reference/trial02_cdisc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example CDISC Clinical Trial Dataset in ADaM Format — trial02_cdisc","text":"","code":"trial02_cdisc"},{"path":"https://openpharma.github.io/beeca/reference/trial02_cdisc.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example CDISC Clinical Trial Dataset in ADaM Format — trial02_cdisc","text":"data frame 254 rows 13 columns, representing trial participants key variables: USUBJID Unique subject identifier (alphanumeric code). code unique clinical trial PARAM Parameter name indicating specific measurement outcome assessed. AGE Age participant study enrollment, years. AGEGR1 Categorical representation age groups. AGEGR1N Numeric code representing age groups, used statistical modeling. RACE Self-identified race participant RACEN Numeric representation race categories, used statistical modeling. SEX Participant's sex birth. TRTP Planned treatment assignment, indicating specific intervention control condition. TRTPN Numeric code planned treatment, simplifying data analysis procedures. AVAL Analysis value, representing primary outcome measure participant. AVALC Character representation analysis value, used descriptive summaries. FASFL Full analysis set flag, indicating participant's data included full analysis set.","code":""},{"path":"https://openpharma.github.io/beeca/reference/trial02_cdisc.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Example CDISC Clinical Trial Dataset in ADaM Format — trial02_cdisc","text":"dataset reformatted educational use safetyData package, specifically adam_adtte. original data detailed information, please refer safetyData documentation.","code":""},{"path":"https://openpharma.github.io/beeca/reference/trial02_cdisc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Example CDISC Clinical Trial Dataset in ADaM Format — trial02_cdisc","text":"dataset serves illustrative example learning ADaM standard clinical trials. includes common variables like demographic information, treatment assignments, outcome measures. Data privacy ethical considerations addressed anonymization subject identifiers sensitive information. dataset intended educational training purposes .","code":""},{"path":"https://openpharma.github.io/beeca/reference/trial02_cdisc.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Example CDISC Clinical Trial Dataset in ADaM Format — trial02_cdisc","text":"numeric codes categorical variables RACEN TRTPN arbitrary interpreted within context dataset. example, refer categorical representations additional context.","code":""},{"path":"https://openpharma.github.io/beeca/news/index.html","id":"beeca-020","dir":"Changelog","previous_headings":"","what":"beeca 0.2.0","title":"beeca 0.2.0","text":"Extensions allow two treatment arms model fit.","code":""},{"path":"https://openpharma.github.io/beeca/news/index.html","id":"beeca-013","dir":"Changelog","previous_headings":"","what":"beeca 0.1.3","title":"beeca 0.1.3","text":"CRAN release: 2024-06-18 Preparation CRAN submission","code":""},{"path":"https://openpharma.github.io/beeca/news/index.html","id":"beeca-010","dir":"Changelog","previous_headings":"","what":"beeca 0.1.0","title":"beeca 0.1.0","text":"Added NEWS.md file track changes package. Added documentation via pkgdown.","code":""}]
